export EDITOR='vim'
export GIT_EDITOR='vim'
export PATH=/usr/local/bin:$HOME/local/node/bin:$PATH
export TODOTXT_DEFAULT_ACTION=ls

source ~/.aliases
[[ -s $HOME/.environment ]] && source $HOME/.environment
source ~/.git-completion
source ~/.hub-completion

HISTCONTROL=ignoredups:erasedups  # don't keep duplicate history entries
HISTSIZE=10000                    # larger history
HISTFILESIZE=$HISTSIZE            # larger history file
shopt -s histreedit # re-edit history substitution line on failure
shopt -s histverify # edit a recalled history before executing
# append to history, clear history, load history from file, prompt
export PROMPT_COMMAND="history -a; history -c; history -r; $PROMPT_COMMAND"

# see also: https://github.com/sindresorhus/pure/blob/master/pure.zsh
function git_dirty {
  git rev-parse --is-inside-work-tree &>/dev/null || return
  git diff --quiet --ignore-submodules HEAD &>/dev/null
  (($? == 1)) && echo '☠'
}
function git_branch {
  git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e "s/* \(.*\)/[\1$(git_dirty)]/"
}

function host {
  if [[ "$SSH_CONNECTION" != '' ]]; then
    echo '\h  '
  fi
}

export PS1='$(host)\w$(git_branch) ❯ '

# add ~/.bin and ~/.rbenv/bin and /usr/local/share/npm/bin
PATH=$PATH:$HOME/.bin:$HOME/.rbenv/bin:/usr/local/share/npm/bin

cloud() {
  eval "$(ion-client shell)"
  cloud "$@"
}

eval "$(rbenv init -)"

### Added by the Heroku Toolbelt
export PATH="/usr/local/heroku/bin:$PATH"
